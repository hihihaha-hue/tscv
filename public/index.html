<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ª£ SƒÉn C·ªï V·∫≠t</title>
    <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <button id="music-toggle-btn">üéµ</button>
    <audio id="background-music" src="/assets/sounds/background.mp3" loop></audio>
    <button id="rulebook-btn">?</button>
    <button id="history-log-btn">üìú</button>

    <div class="container">
        <!-- M√ÄN H√åNH CH√çNH -->
        <div id="home-screen">
            <h1>Th·ª£ SƒÉn C·ªï V·∫≠t</h1>
            <input type="text" id="player-name-input" placeholder="NH·∫¨P T√äN TH·ª¢ SƒÇN..." maxlength="15">
            <button id="create-room-btn">M·ªü Cu·ªôc Th√°m Hi·ªÉm M·ªõi</button>
            <hr>
            <input type="text" id="room-code-input" placeholder="NH·∫¨P M√É ƒêO√ÄN..." maxlength="4" style="text-transform:uppercase">
            <button id="join-room-btn">Tham Gia ƒêo√†n</button>
        </div>

        <!-- M√ÄN H√åNH PH√íNG CH·ªú -->
        <div id="room-screen" style="display: none;">
            <h2>ƒêo√†n Th√°m Hi·ªÉm: <span id="room-code-display"></span></h2>
            <ul id="player-list"></ul>
            <div id="host-controls" class="controls-wrapper"><button id="add-bot-btn">Th√™m AI</button><button id="start-game-btn" disabled>B·∫Øt ƒê·∫ßu</button></div>
            <div id="player-controls" class="controls-wrapper"><button id="ready-btn">S·∫µn S√†ng</button></div>
        </div>

        <!-- M√ÄN H√åNH CH∆†I GAME -->
       <div id="game-screen" style="display: none;">
    <!-- C·ªòT TR√ÅI: D√†nh cho chat ho·∫∑c th√¥ng tin ph·ª• -->
    <div id="left-column">
        <div id="role-display" class="game-panel">
            <!-- N·ªôi dung vai tr√≤ s·∫Ω ƒë∆∞·ª£c JS ch√®n v√†o ƒë√¢y -->
        </div>
        <div id="chat-container" class="game-panel">
            <div id="chat-messages"></div>
            <div id="chat-input-area">
                <input type="text" id="chat-input" placeholder="Nh·∫≠p tin nh·∫Øn..." maxlength="200">
                <button id="send-chat-btn">G·ª≠i</button>
            </div>
        </div>
    </div>

    <!-- C·ªòT GI·ªÆA: Khu v·ª±c ch√≠nh hi·ªÉn th·ªã ng∆∞·ªùi ch∆°i v√† giai ƒëo·∫°n -->
    <div id="center-column">
        <div id="phase-info" class="game-panel">
            <h2 id="phase-title"></h2>
            <div id="timer-display"></div>
        </div>
        <div id="players-container" class="players-grid">
            <!-- C√°c avatar ng∆∞·ªùi ch∆°i s·∫Ω ƒë∆∞·ª£c JS ch√®n v√†o ƒë√¢y -->
        </div>
    </div>

    <!-- C·ªòT PH·∫¢I: B·∫£ng x·∫øp h·∫°ng, N√∫t h√†nh ƒë·ªông, v√† Log game -->
    <div id="right-column">
        <div id="leaderboard" class="game-panel">
            <h3>B·∫£ng X·∫øp H·∫°ng</h3>
            <ul id="leaderboard-list"></ul>
        </div>
        <div id="action-container" class="game-panel">
            <p id="phase-description"></p>
            <div id="choice-buttons-container" class="action-buttons-grid" style="display: none;">
                <button class="choice-buttons loyal" data-action="Gi·∫£i M√£">üìú Gi·∫£i M√£</button>
                <button class="choice-buttons corrupt" data-action="Ph√° Ho·∫°i">üí£ Ph√° Ho·∫°i</button>
                <button class="choice-buttons blank" data-action="Quan S√°t">üëÅÔ∏è Quan S√°t</button>
            </div>
            <button id="skip-coordination-btn" class="skip-button" style="display: none;">H√†nh ƒë·ªông m·ªôt m√¨nh</button>
            <button id="next-day-btn" class="next-day-btn" style="display: none;">B·∫Øt ƒê·∫ßu Ng√†y Ti·∫øp Theo</button>
        </div>
        <div id="message-area" class="game-panel">
             <!-- Log game s·∫Ω ƒë∆∞·ª£c JS ch√®n v√†o ƒë√¢y -->
        </div>
    </div>
</div>

    <!-- OVERLAY HO√ÄNG H√îN -->
    <div id="twilight-overlay" style="display: none;">
        <div id="twilight-meeting-ui">
            <div class="twilight-header">
                <h2>Ho√†ng H√¥n - V·∫°ch Tr·∫ßn</h2>
                <button id="twilight-close-btn" class="close-btn">√ó</button>
            </div>
            <ul id="twilight-player-list"></ul>
            <div class="twilight-footer">
                <button id="twilight-rest-btn" class="skip-button">Ngh·ªâ Ng∆°i</button>
            </div>
        </div>
    </div>

    <!-- OVERLAY CHUY·ªÇN C·∫¢NH -->
    <div id="night-transition-overlay"><h2 id="night-transition-text"></h2></div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/js/ui.js"></script>
    <script src="/js/network.js"></script>
    <script src="/client.js"></script>
    <script type="text/template" id="rulebook-template">
        <!-- N·ªôi dung s√°ch lu·∫≠t -->
    </script>
</body>
</html>